@{
    ViewData["Title"] = "AI Odgovor";
}
<h1>@ViewData["Title"]</h1>

<div id="status">
    <p>Preparing your content...</p>
</div>

<div id="loader" style="display: block; margin: 20px 0;">
    <div class="spinner"></div>
</div>

<div id="result" style="display: none;"></div>

@section Scripts {
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            fetch('/Home/GetAIResponseInMarkdown/')
                .then(res => res.text())
                .then(html => {
                    document.getElementById('loader').style.display = 'none';
                    document.getElementById('status').style.display = 'none';
                    document.getElementById('result').style.display = 'block';
                    document.getElementById('result').innerHTML = html;
                })
                .catch(err => {
                    document.getElementById('status').innerText = 'An error occurred while loading content.';
                    document.getElementById('loader').style.display = 'none';
                });
        });
    </script>

    <style>
        .spinner {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: auto;
        }
    </style>
}